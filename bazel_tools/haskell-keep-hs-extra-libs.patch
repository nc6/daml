rules_haskell excludes Haskell libraries from the extra-libraries field in
package config files to avoid linker errors in a Haskell-CC-Haskell sandwhich.
See https://github.com/tweag/rules_haskell/issues/873.
Here we carry Haskell libraries only through the extra-libraries field, so we
have to undo those patches.
diff --git a/haskell/private/path_utils.bzl b/haskell/private/path_utils.bzl
index 59303ec..7327ae6 100644
--- a/haskell/private/path_utils.bzl
+++ b/haskell/private/path_utils.bzl
@@ -289,11 +289,7 @@ def link_libraries(libs, args, prefix_optl = False):
     #
     # TODO Get rid of this hack. See
     # https://github.com/tweag/rules_haskell/issues/873.
-    cc_libs = depset(direct = [
-        lib
-        for lib in libs.to_list()
-        if not get_lib_name(lib).startswith("HS")
-    ])
+    cc_libs = libs
 
     if prefix_optl:
         libfmt = "-optl-l%s"
